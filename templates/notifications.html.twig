{% extends 'base_template.html.twig' %}

{% block title %}Notifications - {{ constant('WEBSITE_TITLE')}} {% endblock %}

{% block content %}
<main>
    <div class="container-fluid">
        <div class="row">
            <div class="row text-center mt-3 mb-3">
				<strong><h1>Mes demandes</h1></strong>
			</div>
            <div class="row text-center mt-5 mb-3 pt-5">
					<h3>Vos demandes envoyées</h3>
				</div>
				<table id="myTable" class="table text-center table-striped w-75"> <!-- w-75 fonctionne mais pas mw-75 SUS -->
					<thead>
						<tr>
							<th>Image de profil</th>
							<th>Prenom</th>
							<th>Nom</th>
							<th>Email</th>
							<th>Supprimer</th>
						</tr>
					</thead>
					<tbody>
						{# {% for utilisateur in contacts %}
							<tr>
								<td><img src="image/photo_user/{{ utilisateur.getPhotoDeProfil }}" alt="photoDeProfil"  class="rounded-circle" style="width: 50px; height: 50px;"></td>
								<td>{{ utilisateur.getPrenom }}</td>
								<td>{{ utilisateur.getNom }}</td>
								<td>{{ utilisateur.getEmail }}</td>
								<td>
									<a class="" role="button" href="" data-bs-toggle="modal" data-bs-target="#fenetreModale{{utilisateur.getId}}" aria-expanded="false">
										<i class="fa-solid fa-trash"></i>
									</a>
								</td>
							</tr>
							<div class="modal fade" id="fenetreModale{{utilisateur.getId}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog modal-lg">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Suppression du contact
												{{utilisateur.getPrenom}}
												{{utilisateur.getNom}}</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<form action="index.php?controleur=contacts&methode=supprimer&id={{ utilisateur.getId }}" method="POST" enctype="multipart/form-data">
											<div class="modal-body">
												<label>Êtes-vous sûr de vouloir supprimer le contact
													{{utilisateur.getPrenom}}
													{{utilisateur.getNom}}
													?</label>
											</div>
											<div class="modal-footer">
												<button type="submit" class="btn btn-primary" name="update_article">Supprimer</button>
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
											</div>
										</form>
									</div>
								</div>
							</div>
						{% endfor %} #}
					</tbody>
				</table>


                <div class="row text-center mb-3 pt-5 mt-5">
					<h3>Vos demandes reçues</h3>
				</div>
				<table id="myTable" class="table table-striped mw-75">
					<thead>
						<tr>
							<th>Image de profil</th>
							<th>Prenom</th>
							<th>Nom</th>
							<th>Email</th>
							<th>Supprimer</th>
						</tr>
					</thead>
					<tbody>
						{# {% for utilisateur in contacts %}
							<tr>
								<td><img src="image/photo_user/{{ utilisateur.getPhotoDeProfil }}" alt="photoDeProfil"  class="rounded-circle" style="width: 50px; height: 50px;"></td>
								<td>{{ utilisateur.getPrenom }}</td>
								<td>{{ utilisateur.getNom }}</td>
								<td>{{ utilisateur.getEmail }}</td>
								<td>
									<a class="" role="button" href="" data-bs-toggle="modal" data-bs-target="#fenetreModale{{utilisateur.getId}}" aria-expanded="false">
										<i class="fa-solid fa-trash"></i>
									</a>
								</td>
							</tr>
							<div class="modal fade" id="fenetreModale{{utilisateur.getId}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog modal-lg">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Suppression du contact
												{{utilisateur.getPrenom}}
												{{utilisateur.getNom}}</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<form action="index.php?controleur=contacts&methode=supprimer&id={{ utilisateur.getId }}" method="POST" enctype="multipart/form-data">
											<div class="modal-body">
												<label>Êtes-vous sûr de vouloir supprimer le contact
													{{utilisateur.getPrenom}}
													{{utilisateur.getNom}}
													?</label>
											</div>
											<div class="modal-footer">
												<button type="submit" class="btn btn-primary" name="update_article">Supprimer</button>
												<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
											</div>
										</form>
									</div>
								</div>
							</div>
						{% endfor %} #}
					</tbody>
				</table>
                <div class="text-center pt-5">
                    <a class="px-5 btn btn-secondary" href="index.php?controleur=contacts&methode=afficherUtilisateurs" role="button">Afficher mes contacts</a>
				</div>
				<div class="text-center pt-3">
					<a class="px-5 btn btn-primary" href="index.php?controleur=contacts&methode=afficherUtilisateurs" role="button">Ajouter un contact</a>
				</div>
        </div>
    </div>
</main>
{% endblock %}